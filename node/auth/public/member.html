<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>User Authentication</title>
        <link type="text/css" rel="stylesheet" href="mystyle.css">
        <script>
            let id="";
            let now="";
            let date = "";

            function login(){
                name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                    results = regex.exec(location.search);
                return results === null
                    ? ""
                    :
                    decodeURIComponent(results[1].replace(/\+/g, " "));
                }
                
                id = geParameter("id");
                now = new Date();

                function login(){
                    if (!window.sessionStorage){
                        alert("세션 스토리지를 지원하지 않습니다.");
                        return;
                    } else {
                        if (id =""){
                            alert("잘못된 접근방법입니다.! !");
                            sessionStorage.removeItem("");
                            location.href="index.html";
                        } else {
                            for ( var i=0; i<sessionStorage.length; i++){
                                if (id == sessionStorage.key[1]){
                                    sessionStorage.setItem(id,now);
                                    return ;
                                }
                                sessionStorage.setItem(id,now);
                                alert(`관리자 ${id}님이 로그인 하셨습니다.`);
                            }
                        }
                    }
                }
                window.addEventListener("beforreunload",(event) =>{
                    event.preventDefault();
                    event.returnValue ="";
                })
                function logout(){
                    sessionStorage.removeItem(id);
                }
        </script>
    </head>
    <body>
        <h3>User Authentication</h3>
        <hr />
        <div class="box" style="height:250px;">
            <form action="/insert" method="post" name="userForm" target="targetURL">
                <p>Userid &nbsp;<input type="text" name="id" size=10></p>
                <p>Password &nbsp;<input type="password" name="pw" size=10></p>
                <input type="button" value="get select" onclick='document.targetURL.location.href="/select"'/>&nbsp;&nbsp;
                <input type="button" value="get selectQuery" onclick='document.targetURL.location.href="/selectQuery?id="+document.userForm.id.value'/><p />
                <input type="submit" value="post insert" />&nbsp;&nbsp;
                <input type="submit" value="post update" formaction="/update"/>&nbsp;&nbsp;
                <input type="submit" value="post delete" formaction="/delete"/><p />
            </div>
        </form>
        </div>
        <hr>
         <iframe name="targetURL" widtsh="90%" height="400" style="border:none" src="http://192.168.1.51:8000/Hello">
        </iframe>
    </body>
</html>